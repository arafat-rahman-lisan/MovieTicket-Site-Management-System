@model Movie_Site_Management_System.Models.SeatType
@{
    ViewData["Title"] = "Delete Seat Type";
    ViewBag.GlassHeader = true;

    var relatedSeats = (int?)ViewBag.RelatedSeatCount ?? 0;
    var hasRelations = relatedSeats > 0;
}

<link rel="stylesheet" href="~/css/admin-glass-ultra.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/seattype/seattype-crud.css" asp-append-version="true" />

<section class="admin-ultra-shell">
    <!-- Film rails -->
    <div class="film-rail film-rail--left" aria-hidden="true"></div>
    <div class="film-rail film-rail--right" aria-hidden="true"></div>
    <!-- Aura + grain -->
    <div class="ultra-aura"></div>
    <div class="film-grain"></div>

    <div class="container py-4 position-relative">
        <div class="ultra-card">
            <div class="ultra-card__shine"></div>

            <div class="ultra-card__header">
                <h2 class="ultra-title">
                    <svg class="title-icon" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                        <path d="M4 5h16a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Zm2 3v10h12V8H6Z" />
                    </svg>
                    Delete Seat Type
                </h2>
                <div class="d-flex align-items-center gap-2 ms-auto">
                    <a asp-action="Index" class="btn btn-outline-secondary btn-sm">Back</a>
                </div>
            </div>

            @if (hasRelations)
            {
                <div class="ultra-alert ultra-alert--warning">
                    <strong>Warning:</strong> This seat type is already used (Seats: @relatedSeats). You cannot delete it.
                </div>
            }

            <dl class="row kv-dim mt-3">
                <dt class="col-sm-3">Name</dt>
                <dd class="col-sm-9">@Model.Name</dd>

                <dt class="col-sm-3">Base Price</dt>
                <dd class="col-sm-9">@Model.BasePrice.ToString("0.00")</dd>

                <dt class="col-sm-3">Description</dt>
                <dd class="col-sm-9">
                    @if (!string.IsNullOrWhiteSpace(Model.Description))
                    {
                        @Model.Description
                    }
                    else
                    {

                        <span class="text-muted">—</span>
                    }
                </dd>
            </dl>

            @using (Html.BeginForm("Delete", "SeatTypes", FormMethod.Post, new { @class = "mt-4 d-flex gap-2" }))
            {
                @Html.AntiForgeryToken()
                @Html.HiddenFor(m => m.SeatTypeId)

                @* Render two separate button variants to avoid inline Razor in tag attributes *@
                @if (hasRelations)
                {
                    <button type="submit" class="btn btn-danger" disabled="disabled">Yes, delete</button>
                }
                else
                {
                    <button type="submit" class="btn btn-danger">Yes, delete</button>
                }

                <a asp-action="Index" class="btn btn-outline-secondary">Cancel</a>
            }
        </div>
    </div>
</section>
